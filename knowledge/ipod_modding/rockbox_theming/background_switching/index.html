 <!DOCTYPE html>
<html lang="en">
 <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>D00k &nbsp;â€¢  1. Backdrop Switching </title>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="shortcut icon" type="image/png" href="/img/assets/favicon.png">
    <link rel="me" href="https://post.lurk.org/@dook">
    <meta property="og:image" content="" />
    <meta property="og:description" 
  content="" />
 </head>

  
 <body>
  <header class="knowledge colours">
    
<div>
<nav>
<ul class="name">
	  	<li>
  		<a class="name" href="/">ðŸ—¦DookðŸ—§</a>
  	</li>
</ul>
  <ul role="list">
  
   
    <li>
      <a class="" href="/gallery/">
        Gallery
      </a>
    </li>
  
   
    <li>
      <a class="" href="/projects/">
        Projects
      </a>
    </li>
  
   
    <li>
      <a class="active" href="/knowledge/">
        Knowledge
      </a>
    </li>
  
   
    <li>
      <a class="" href="/journal/">
        Journal
      </a>
    </li>
  
   
    <li>
      <a class="" href="/about/">
        About
      </a>
    </li>
   
</ul>
</nav> 
</div>

  </header>
   <main>
      <ol start="0" class="guide">
       
        
         <li>
          <a  href="/knowledge/ipod_modding/rockbox_theming/">Rockbox Theming</a>
         </li>
        
         <li>
          <a  class="next" href="/knowledge/ipod_modding/rockbox_theming/background_switching/">1. Backdrop Switching</a>
         </li>
        
         <li>
          <a  href="/knowledge/ipod_modding/rockbox_theming/lockscreen/">2. Lockscreen</a>
         </li>
        
         <li>
          <a  href="/knowledge/ipod_modding/rockbox_theming/overlay_images/">3. Overlay Images</a>
         </li>
        
         <li>
          <a  href="/knowledge/ipod_modding/rockbox_theming/unused_functions/">4. Unused Functions</a>
         </li>
        
         <li>
          <a  href="/knowledge/ipod_modding/rockbox_theming/conclusion/">Conclusion</a>
         </li>
        
    </ol>
    <h1>1. Backdrop Switching</h1>
     <hr>
    <p>When it comes to making more advanced themes, switching backdrops is the door to most things. At it&rsquo;s core, it essentially involves using Rockbox&rsquo;s &ldquo;current screen&rdquo; tag to decide which backdrop gets displayed on which screen. Here&rsquo;s a list of all the available screens and their corresponding numbers:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Plain" data-lang="Plain"><span class="line"><span class="cl">No.| Screen
</span></span><span class="line"><span class="cl">1 - Main Menu
</span></span><span class="line"><span class="cl">2 - WPS (Music screen)
</span></span><span class="line"><span class="cl">3 - Recording screen
</span></span><span class="line"><span class="cl">4 - FM Radio screen
</span></span><span class="line"><span class="cl">5 - Current Playlist screen
</span></span><span class="line"><span class="cl">6 - Settings menus
</span></span><span class="line"><span class="cl">7 - File browser
</span></span><span class="line"><span class="cl">8 - Database browser
</span></span><span class="line"><span class="cl">9 - Plugin browser
</span></span><span class="line"><span class="cl">10 - Quickscreen
</span></span><span class="line"><span class="cl">11 - Pitchscreen
</span></span><span class="line"><span class="cl">12 - Setting chooser
</span></span><span class="line"><span class="cl">13 - Playlist Catalogue Viewer
</span></span><span class="line"><span class="cl">14 - Plugin
</span></span><span class="line"><span class="cl">15 - Context menu
</span></span><span class="line"><span class="cl">16 - System Info screen
</span></span><span class="line"><span class="cl">17 - Time and Date Screen
</span></span><span class="line"><span class="cl">18 - Bookmark browser
</span></span><span class="line"><span class="cl">19 - Shortcuts menu
</span></span><span class="line"><span class="cl">20 - Track Info screen
</span></span><span class="line"><span class="cl">21 - USB Screen
</span></span></code></pre></div><hr>
<h2 id="using-the-function">Using the Function</h2>
<p>Usually this function is used in either of the following ways:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Plain" data-lang="Plain"><span class="line"><span class="cl">1| %?if(%cs, =, 21)&lt;%V(True)|%V(False)&gt;
</span></span><span class="line"><span class="cl"> | #      or
</span></span><span class="line"><span class="cl">2| %?if(%cs, !=, 21)&lt;%?if(%cs, !=, 10)&lt;&lt;%V(True)|%V(False)&gt;&gt;&gt;
</span></span></code></pre></div><p>The &ldquo;<strong>%?if()</strong>&rdquo; function at the start polls the &ldquo;<strong>%cs</strong>&rdquo; function to see if it is (or in no.2, isn&rsquo;t) equal to 21, and different functions can be triggered depending on whether the answer is true or false. The second function uses the &ldquo;not equal to&rdquo; or &ldquo;!=&rdquo; operator, to determine if something should be displayed when a screen <em>isn&rsquo;t</em> the 21st or 10th screen (this can be stacked.)</p>
<h2 id="making-it-all-work">Making it all work</h2>
<p>When it comes to putting everything together, the key is to get the right setup. While there is something similar in <a href="https://themes.rockbox.org/index.php?themeid=3131&amp;target=ipodvideo" target="_blank" rel="noopener">FreshOS</a> by Yuuiko, I&rsquo;ve had much more success with a method best seen in <a href="https://davidbarkan.com/" target="_blank" rel="noopener">David Barkan&rsquo;s</a> theme <a href="https://themes.rockbox.org/index.php?themeid=3191&amp;target=ipodvideo" target="_blank" rel="noopener">AMusicPod</a>. Which looks like the following:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Plain" data-lang="Plain"><span class="line"><span class="cl">#Load Background
</span></span><span class="line"><span class="cl">%V(0,0,-,-,-)%VB
</span></span><span class="line"><span class="cl">%x(Da,backdrop home_g.bmp,0,0)
</span></span><span class="line"><span class="cl">%V(0,0,-,-,-)
</span></span><span class="line"><span class="cl">#
</span></span><span class="line"><span class="cl">#USB Screen
</span></span><span class="line"><span class="cl">%?if(%cs, =, 21)&lt;%xd(M)&gt;
</span></span><span class="line"><span class="cl">%Vi(m,0,0,1,1,-)
</span></span></code></pre></div><p>You can read more about how it all works <a href="https://www.rockbox.org/wiki/CustomWPS#Viewport_Draw_Layer" target="_blank" rel="noopener">here</a>. Without this, your viewports will mess up displaying white, or white backgrounds. The last &ldquo;<strong>%V(0,0,-,-,-)</strong>&rdquo; isn&rsquo;t always needed, however if you intended to follow the next section and build a lockscreen, then you will need it to make that work.</p>

          

    
    
    
    
        
            
        
    
        
            
                
            
        
    
        
            
                
            
        
    
        
    
        
    
        
    

    
    
    
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
        
    
        
            
                
            
        
    
        
            
                
            
        
    

    
    
    <div class="back">
        
            <a class="prev" href="https://d00k.net/knowledge/ipod_modding/rockbox_theming/">âŒ© Back to Rockbox Theming</a> 
        

        
            <a class="next" href="https://d00k.net/knowledge/ipod_modding/rockbox_theming/lockscreen/">Next âŒª</a>
        
    </div>
    

  </main>
 </body>
 
 <footer>
  <hr>
       <a href="https://webring.xxiivv.com/#d00k" target="_blank" alt="webring">
        <svg fill="var(--text)" stroke="var(--text)" stroke-linecap="square" stroke-width="28" xmlns="http://www.w3.org/2000/svg" viewBox="0 -15 300 300" height="40" width="40">
                            &gt;
                            <path d="M201.962 210a60 60 0 10-103.924-60l-50 86.603" fill="var(--background)" stroke="var(--text)"></path>
                            <path d="M98.038 210a60 60 0 10103.924-60l-50-86.603" fill="var(--background)" stroke="var(--text)"></path>
                            <path d="M150 120a60 60 0 100 120h100" fill="var(--background)" stroke="var(--text)"></path>
                            &lt; <circle xmlns="http://www.w3.org/2000/svg" fill="var(--background)" r="60" stroke="var(--text)" cx="150" cy="180" stroke-width="28"></circle>
                        </svg>
      </a>
      <a href="/index.xml" target="_blank" alt="RSS Feed">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 210 210" height="34" width="34" stroke-width="10" stroke="var(--text)" fill="var(--text)"><path d="M30,45 A15,15 0 0,1 15,30 A15,15 0 0,1 30,15 A150,150 0 0,1 180,165 A15,15 0 0,1 165,180 A15,15 0 0,1 150,165 A120,120 0 0,0 30,45 M30,105 A15,15 0 0,1 15,90 A15,15 0 0,1 30,75 A90,90 0 0,1 120,165 A15,15 0 0,1 105,180 A15,15 0 0,1 90,165 A60,60 0 0,0 30,105 M30,135 A30,30 0 0,1 60,165 A30,15 0 0,1 30,180 A15,15 0 0,1 15,165 A15,30 0 0,1 30,135 "></path></svg>
      </a>
      <a href="https://github.com/D0-0K" target="_blank" alt="github">
        <svg viewBox="0 0 140 140" xmlns="http://www.w3.org/2000/svg" height="34" width="34"><path style="fill: var(--text);" d="M63.994.152C28.66.152 0 28.806 0 64.158c0 28.272 18.336 52.26 43.768 60.726 3.2.586 4.37-1.392 4.37-3.084 0-1.52-.06-5.544-.092-10.888-17.8 3.87-21.56-8.576-21.56-8.576-2.906-7.394-7.102-9.364-7.102-9.364-5.812-3.972.44-3.888.44-3.888 6.424.452 9.8 6.592 9.8 6.592 5.712 9.784 14.984 6.96 18.63 5.32.58-4.14 2.234-6.96 4.06-8.56-14.21-1.612-29.15-7.104-29.15-31.63 0-6.984 2.494-12.7 6.588-17.172-.66-1.62-2.856-8.12.628-16.932 0 0 5.374-1.72 17.6 6.56 5.104-1.42 10.58-2.128 16.02-2.152 5.44.024 10.914.734 16.024 2.154 12.22-8.28 17.58-6.56 17.58-6.56 3.496 8.81 1.3 15.316.64 16.936 4.104 4.476 6.58 10.19 6.58 17.174 0 24.586-14.966 30-29.22 31.58 2.296 1.98 4.34 5.88 4.34 11.854 0 8.556-.076 15.46-.076 17.56 0 1.706 1.154 3.7 4.4 3.074C109.68 116.396 128 92.42 128 64.156 128 28.808 99.344.152 63.994.152z"/></svg>
      </a>   
      <div style="float:right;">
        <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a>
      </div> 
   </footer>